# Результаты тестирования этапа 15

## Статус: 8 из 12 тестов пройдено ✅

### ✅ Пройденные тесты (8):

1. **Сценарий 1:** Стрела проходит только обычный прострел → дефолтный шаблон
2. **Сценарий 3:** Стрела проходит обе системы → приоритет стратегии
3. **Сценарий 6:** Стратегия с `useGlobalFilters = false` и базовыми фильтрами
4. **Сценарий 7:** Стратегия с `useGlobalFilters = true`
5. **Сценарий 8:** Биржа отключена в `exchanges`, но указана в стратегии
6. **Сценарий 9:** Параллельная обработка нескольких пользователей
7. **Сценарий 10:** Валидация стратегии при сохранении
8. **Сценарий 11:** Уникальность стрел в трекере серий

### ⚠️ Требуют доработки (4):

1. **Сценарий 2:** Стрела проходит только стратегию
   - Проблема: стратегия с `useGlobalFilters=true` требует глобальных настроек (exchangeSettings)
   - Решение: добавить глобальные настройки в тест или использовать `useGlobalFilters=false`

2. **Сценарий 4:** Стрела проходит несколько стратегий одновременно
   - Проблема: стратегии с `useGlobalFilters=true` требуют глобальных настроек
   - Решение: добавить глобальные настройки в тест

3. **Сценарий 5:** Серия стрел с условием "series ≥ 2 стрелы за 5 минут"
   - Проблема: серия не срабатывает, возможно проблема с логикой проверки серии
   - Решение: проверить логику добавления стрел в трекер и проверки серии

4. **Сценарий 12:** Очистка старых стрел из трекера
   - Проблема: максимальный период возвращает дефолтное значение 900 вместо 600
   - Решение: проверить метод `_get_max_time_window_for_user()` - возможно, он не учитывает стратегии пользователя

## Запуск тестов

```bash
pytest test_strategies_scenarios.py -v
```

## Файлы

- `test_strategies_scenarios.py` - файл с тестами для всех 12 сценариев
- `pytest.ini` - конфигурация pytest для асинхронных тестов

