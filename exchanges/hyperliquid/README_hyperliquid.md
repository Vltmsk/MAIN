# Hyperliquid Integration

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Hyperliquid –¥–ª—è —Å–±–æ—Ä–∞ 1-—Å–µ–∫—É–Ω–¥–Ω—ã—Ö —Å–≤–µ—á–µ–π —Å Spot –∏ Linear (Perpetuals) —Ä—ã–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ –ø–æ—Ç–æ–∫–∏ —Å–¥–µ–ª–æ–∫.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å:
```bash
python main.py
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ `config.py`:
```python
config.exchanges.hyperliquid_spot = True    # Spot —Ä—ã–Ω–æ–∫
config.exchanges.hyperliquid_linear = True  # Futures (Perpetuals) —Ä—ã–Ω–æ–∫
```

## üîå WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### Endpoint
- **URL**: `wss://api.hyperliquid.xyz/ws`
- **–°–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `aiohttp.ClientSession.ws_connect()`
- **–§—É–Ω–∫—Ü–∏—è**: `_ws_connection_worker()` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **Heartbeat**: 30 —Å–µ–∫—É–Ω–¥ (–ø–∞—Ä–∞–º–µ—Ç—Ä `heartbeat=PING_INTERVAL_SEC` –≤ `ws_connect()`)
- **–¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: 180 —Å–µ–∫—É–Ω–¥ (`timeout=aiohttp.ClientTimeout(total=180)`)
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: 0.5 —Å–µ–∫—É–Ω–¥—ã (–¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–¥–ø–∏—Å–∫–∞–º–∏**: 0.05 —Å–µ–∫—É–Ω–¥—ã (`await asyncio.sleep(0.05)`)
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏**: 0.5 —Å–µ–∫—É–Ω–¥—ã

### Ping/Pong –º–µ—Ö–∞–Ω–∏–∑–º

Hyperliquid –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ä—É—á–Ω–æ–π heartbeat** —á–µ—Ä–µ–∑ JSON —Å–æ–æ–±—â–µ–Ω–∏—è:
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: 55 —Å–µ–∫—É–Ω–¥ (`PING_INTERVAL_SEC = 55`)
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –û—Ç–¥–µ–ª—å–Ω–∞—è asyncio –∑–∞–¥–∞—á–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON —Å–æ–æ–±—â–µ–Ω–∏–µ `{"method": "ping"}`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞**: –û–∂–∏–¥–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç `{"channel": "pong"}`

**–í–∞–∂–Ω–æ**: Hyperliquid —Ç—Ä–µ–±—É–µ—Ç ping –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥, –∏–Ω–∞—á–µ —Ä–∞–∑–æ—Ä–≤—ë—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª 55 —Å–µ–∫—É–Ω–¥ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å –Ω–µ–±–æ–ª—å—à–∏–º –∑–∞–ø–∞—Å–æ–º.

```python
async def ping_loop():
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ping —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"""
    while True:
        try:
            await asyncio.sleep(PING_INTERVAL_SEC)  # 55 —Å–µ–∫—É–Ω–¥
            # Hyperliquid –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JSON —Ñ–æ—Ä–º–∞—Ç: {"method": "ping"}
            ping_msg = {"method": "ping"}
            await ws.send_json(ping_msg)
        except Exception:
            break

ping_task = asyncio.create_task(ping_loop())
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ pong –æ—Ç–≤–µ—Ç–∞**:
```python
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º pong –æ—Ç–≤–µ—Ç: {"channel": "pong"}
if isinstance(data, dict) and data.get("channel") == "pong":
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º pong
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- Ping –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 55 —Å–µ–∫—É–Ω–¥
- –ó–∞–¥–∞—á–∞ ping –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –≤—Å–µ —Å–∏–º–≤–æ–ª—ã
- –ó–∞–¥–∞—á–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- Hyperliquid —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –µ—Å–ª–∏ ping –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥

## üì° –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª—ã

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏

#### –§–æ—Ä–º–∞—Ç –ø–æ–¥–ø–∏—Å–∫–∏

**–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏**:
```json
{
  "method": "subscribe",
  "subscription": {
    "type": "trades",
    "coin": "BTC"
  }
}
```

**–ö–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏**:
```python
subscribe_msg = {
    "method": "subscribe",
    "subscription": {
        "type": "trades",
        "coin": coin  # –î–ª—è –ø–µ—Ä–ø–æ–≤: name –∏–∑ meta.universe, –¥–ª—è —Å–ø–æ—Ç–∞: –º–æ–∂–µ—Ç –±—ã—Ç—å "PURR/USDC" –∏–ª–∏ "@index"
    }
}
await ws.send_json(subscribe_msg)
```

#### –ú–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥–ø–∏—Å–∫–∏

**–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å**:
1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. **–ó–∞–¥–µ—Ä–∂–∫–∞**: –û–∂–∏–¥–∞–Ω–∏–µ 0.5 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
3. **–ü–æ–¥–ø–∏—Å–∫–∞ –ø–æ —Å–∏–º–≤–æ–ª–∞–º**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–µ JSON —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
4. **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–¥–ø–∏—Å–∫–∞–º–∏**: 0.05 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
5. **–ó–∞–ø—É—Å–∫ ping**: –ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞–¥–∞—á–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ ping

**–ö–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ —Å–∏–º–≤–æ–ª–∞–º**:
```python
# –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
await asyncio.sleep(0.5)

# –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å–¥–µ–ª–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
for symbol in symbols:
    coin = symbol  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª –∫–∞–∫ –µ—Å—Ç—å
    
    subscribe_msg = {
        "method": "subscribe",
        "subscription": {
            "type": "trades",
            "coin": coin
        }
    }
    
    await ws.send_json(subscribe_msg)
    await asyncio.sleep(0.05)  # –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–∫–∏**:
- –î–ª—è –ø–µ—Ä–ø–µ—Ç—É–∞–ª–æ–≤: `coin` = `name` –∏–∑ `meta.universe` (–Ω–∞–ø—Ä–∏–º–µ—Ä, "BTC", "ETH")
- –î–ª—è —Å–ø–æ—Ç–∞: `coin` –º–æ–∂–µ—Ç –±—ã—Ç—å "PURR/USDC" –∏–ª–∏ "@index" (–∏–∑ `spotMeta.universe`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª –∫–∞–∫ –µ—Å—Ç—å –±–µ–∑ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- –û—à–∏–±–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (–Ω–µ –±–æ–ª–µ–µ 5 –æ—à–∏–±–æ–∫ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∑–∞—Å–æ—Ä–µ–Ω–∏—è –ª–æ–≥–æ–≤)

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏**:
```python
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏: {"channel": "subscriptionResponse", ...}
if isinstance(data, dict) and data.get("channel") == "subscriptionResponse":
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```

### –û—Ç–ø–∏—Å–∫–∞ –æ—Ç –∫–∞–Ω–∞–ª–æ–≤

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –Ø–≤–Ω–∞—è –æ—Ç–ø–∏—Å–∫–∞ **–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**

**–ü—Ä–∏—á–∏–Ω–∞**:
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è
- –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `task.cancel()` –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–∞—è –æ—Ç–ø–∏—Å–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–º**:
```python
unsubscribe_msg = {
    "method": "unsubscribe",
    "subscription": {
        "type": "trades",
        "coin": "BTC"
    }
}
await ws.send_json(unsubscribe_msg)
```

## üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–µ—á–µ–π

### –ú–µ—Ö–∞–Ω–∏–∑–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è

Hyperliquid **–Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Å–≤–µ—á–∏** - –æ–Ω–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –∏–∑ –ø–æ—Ç–æ–∫–æ–≤ —Å–¥–µ–ª–æ–∫ (trades) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `CandleBuilder`:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫ –∏–∑ WebSocket –ø–æ—Ç–æ–∫–∞
2. –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫ –≤ 1-—Å–µ–∫—É–Ω–¥–Ω—ã–µ —Å–≤–µ—á–∏
3. –í–æ–∑–≤—Ä–∞—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π —Å–≤–µ—á–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –Ω–æ–≤—É—é —Å–µ–∫—É–Ω–¥—É

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫**:
```json
{
  "channel": "trades",
  "data": [
    {
      "coin": "BTC",
      "px": "50000",
      "sz": "0.001",
      "time": 1234567890000,
      "side": "A"
    }
  ]
}
```

**–ö–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–¥–µ–ª–æ–∫**:
```python
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–¥–µ–ª–∫–∏
# –§–æ—Ä–º–∞—Ç: {"channel": "trades", "data": [...]}
if isinstance(data, dict):
    channel = data.get("channel", "")
    
    if channel == "trades":
        data_field = data.get("data", [])
        if isinstance(data_field, list):
            trades = data_field
            
            for trade in trades:
                price = _parse_float(trade.get("price") or trade.get("px") or ...)
                size = _parse_float(trade.get("size") or trade.get("sz") or ...)
                timestamp = int(trade.get("time") or trade.get("ts") or ...)
                symbol = trade.get("coin") or trade.get("symbol") or ...
                
                # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Å–∏–º–≤–æ–ª
                normalized_symbol = _normalize_symbol(symbol)
                
                if price > 0 and size > 0 and normalized_symbol:
                    finished = await _builder.add_trade(...)
                    if finished is not None:
                        await on_candle(finished)
```

**–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤**:
```python
def _normalize_symbol(symbol: str) -> str:
    """
    –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Å–∏–º–≤–æ–ª Hyperliquid –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ.
    Hyperliquid –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç "BTC/USDC:USDC", "BTC", "@index" –∏–ª–∏ "PURR/USDC".
    """
    symbol = symbol.upper().strip()
    
    # –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "@", —É–±–∏—Ä–∞–µ–º "@"
    if symbol.startswith("@"):
        return symbol.replace("@", "")
    
    # –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç "/", –∏–∑–≤–ª–µ–∫–∞–µ–º –±–∞–∑–æ–≤—É—é –≤–∞–ª—é—Ç—É
    if "/" in symbol:
        parts = symbol.split("/")
        if len(parts) >= 2:
            base = parts[0]
            quote = parts[1].split(":")[0] if ":" in parts[1] else parts[1]
            return f"{base}{quote}"
    
    # –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –±–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞, –¥–æ–±–∞–≤–ª—è–µ–º USDC
    if not symbol.endswith("USDC") and not symbol.endswith("USDT"):
        return f"{symbol}USDC"
    
    return symbol
```

## ‚öôÔ∏è –õ–∏–º–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã Hyperliquid API

–ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏ —Å–æ–±–ª—é–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ª–∏–º–∏—Ç—ã Hyperliquid:

1. **–ú–∞–∫—Å–∏–º—É–º 100 websocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** (`MAX_WEBSOCKET_CONNECTIONS = 100`)
2. **–ú–∞–∫—Å–∏–º—É–º 1000 websocket –ø–æ–¥–ø–∏—Å–æ–∫** (`MAX_WEBSOCKET_SUBSCRIPTIONS = 1000`)
3. **–ú–∞–∫—Å–∏–º—É–º 2000 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É** (`MAX_MESSAGES_PER_MINUTE = 2000`)
4. **–ú–∞–∫—Å–∏–º—É–º 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö inflight post —Å–æ–æ–±—â–µ–Ω–∏–π** (`MAX_INFLIGHT_POST_MESSAGES = 100`)
5. **–ú–∞–∫—Å–∏–º—É–º 100 EVM JSON-RPC –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É** (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
6. **–ú–∞–∫—Å–∏–º—É–º 10 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (–Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∫ –ø—É–±–ª–∏—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 100 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —Å–∏–º–≤–æ–ª—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- –í—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ 80% –ª–∏–º–∏—Ç–∞

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫ (–∫–∞–∂–¥–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ = –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª)
- –ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 1000 –ø–æ–¥–ø–∏—Å–æ–∫, —Å–∏–º–≤–æ–ª—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–µ–∂–¥—É spot –∏ linear
- –í—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ 80% –ª–∏–º–∏—Ç–∞

#### Rate Limiting —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rate limiter –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (ping, –ø–æ–¥–ø–∏—Å–∫–∏)
- –ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç 2000 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω, –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∂–¥—ë—Ç –¥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Å–ª–æ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è sliding window –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ª–∏–º–∏—Ç—ã –≤ –∫–æ–¥–µ

#### –õ–∏–º–∏—Ç—ã –≤ –∫–æ–¥–µ

**Spot —Ä—ã–Ω–æ–∫**:
- **–°–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**: **50 –ø–∞—Ä** (`SPOT_SYMBOLS_PER_CONNECTION = 50`)
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏**: **0.5 —Å–µ–∫—É–Ω–¥—ã**
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–¥–ø–∏—Å–∫–∞–º–∏**: **0.05 —Å–µ–∫—É–Ω–¥—ã**

**Futures (Linear) —Ä—ã–Ω–æ–∫**:
- **–°–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**: **50 –ø–∞—Ä** (`LINEAR_SYMBOLS_PER_CONNECTION = 50`)
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏**: **0.5 —Å–µ–∫—É–Ω–¥—ã**
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–¥–ø–∏—Å–∫–∞–º–∏**: **0.05 —Å–µ–∫—É–Ω–¥—ã**

**–û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- **Ping –∏–Ω—Ç–µ—Ä–≤–∞–ª**: **55 —Å–µ–∫—É–Ω–¥** (`PING_INTERVAL_SEC = 55`)
- **–ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–∞**: **5 —Å–µ–∫—É–Ω–¥** (`RECONNECT_DELAY = 5`)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–∞**: **60 —Å–µ–∫—É–Ω–¥** (`MAX_RECONNECT_DELAY = 60`)
- **–ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π**: **80%** (`WARNING_THRESHOLD = 0.8`)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤:

```python
stats = ws_handler.get_statistics()
print(stats["limits"])
# {
#     "max_connections": 100,
#     "max_subscriptions": 1000,
#     "max_messages_per_minute": 2000,
#     "current_connections": 45,
#     "current_subscriptions": 850,
#     "connections_usage_percent": 45.0,
#     "subscriptions_usage_percent": 85.0
# }
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ª–∏–º–∏—Ç–∞–º

‚ö†Ô∏è **–í–∞–∂–Ω–æ —Å–æ–±–ª—é–¥–∞—Ç—å**:
- **–ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–ª—é–¥–∞–µ—Ç –≤—Å–µ –ª–∏–º–∏—Ç—ã** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ —Å–∏–º–≤–æ–ª—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤—ã–≤–æ–¥—è—Ç—Å—è –ø—Ä–∏ 80% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏
- **Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
- **–ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ª–∏–º–∏—Ç–æ–≤ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏** - —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ API

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```python
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
num_connections_spot = ceil(total_symbols_spot / 50)
num_connections_linear = ceil(total_symbols_linear / 50)
```

**–ü—Ä–∏–º–µ—Ä**:
- 150 —Å–∏–º–≤–æ–ª–æ–≤ Spot ‚Üí 3 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (50 + 50 + 50)
- 120 —Å–∏–º–≤–æ–ª–æ–≤ Linear ‚Üí 3 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (50 + 50 + 20)

**–ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏**:
```python
await asyncio.sleep(0.5)  # 0.5 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
```

## üîÑ –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–∞

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff –æ—Ç 2 –¥–æ 60 —Å–µ–∫—É–Ω–¥
- **–§–æ—Ä–º—É–ª–∞**: `min(2 ^ min(reconnect_attempt - 1, 5), MAX_RECONNECT_DELAY)`
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: 60 —Å–µ–∫—É–Ω–¥ (`MAX_RECONNECT_DELAY = 60`)
- **–°—á—ë—Ç—á–∏–∫**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–æ–≤ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ (`_stats[market]["reconnects"]`)
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ callback `on_error()`

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–∞**:
```python
reconnect_attempt += 1
if reconnect_attempt > 1:
    delay = min(2 ** min(reconnect_attempt - 1, 5), MAX_RECONNECT_DELAY)
    _stats[market]["reconnects"] += 1
    await on_error({
        "exchange": "hyperliquid",
        "market": market,
        "connection_id": connection_id,
        "type": "reconnect",
    })
    await asyncio.sleep(delay)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- **–ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞**: 2 —Å–µ–∫—É–Ω–¥—ã
- **–í—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞**: 4 —Å–µ–∫—É–Ω–¥—ã
- **–¢—Ä–µ—Ç—å—è –ø–æ–ø—ã—Ç–∫–∞**: 8 —Å–µ–∫—É–Ω–¥
- **–ß–µ—Ç–≤—ë—Ä—Ç–∞—è –ø–æ–ø—ã—Ç–∫–∞**: 16 —Å–µ–∫—É–Ω–¥
- **–ü—è—Ç–∞—è –ø–æ–ø—ã—Ç–∫–∞**: 32 —Å–µ–∫—É–Ω–¥—ã
- **–î–∞–ª–µ–µ**: 60 —Å–µ–∫—É–Ω–¥ (–º–∞–∫—Å–∏–º—É–º)

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `logger.error()`
- –ü—Ä–∏ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è callback `on_error()` —Å —Ç–∏–ø–æ–º "reconnect"
- Ping –∑–∞–¥–∞—á–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –¶–∏–∫–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –¥–æ —è–≤–Ω–æ–π –æ—Ç–º–µ–Ω—ã –∑–∞–¥–∞—á–∏

## üîç –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤

### REST API Endpoints

Hyperliquid –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
- **URL**: `https://api.hyperliquid.xyz/info`
- **–ú–µ—Ç–æ–¥**: POST
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: `{"type": "meta"}` –¥–ª—è –ø–µ—Ä–ø–µ—Ç—É–∞–ª–æ–≤ –∏–ª–∏ `{"type": "spotMeta"}` –¥–ª—è —Å–ø–æ—Ç–∞

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –ø–µ—Ä–ø–µ—Ç—É–∞–ª–æ–≤**:
```python
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
response = await session.post(
    "https://api.hyperliquid.xyz/info",
    json={"type": "meta"}
)
data = await response.json()

# –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–∏–º–≤–æ–ª—ã –∏–∑ universe
if "universe" in data:
    symbols = [item["name"] for item in data["universe"]]
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Å–ø–æ—Ç–∞**:
```python
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–ø–æ—Ç–∞
response = await session.post(
    "https://api.hyperliquid.xyz/info",
    json={"type": "spotMeta"}
)
data = await response.json()

# –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–∏–º–≤–æ–ª—ã –∏–∑ universe
if "universe" in data:
    symbols = []
    for item in data["universe"]:
        coin = item.get("coin")  # –ú–æ–∂–µ—Ç –±—ã—Ç—å "PURR/USDC" –∏–ª–∏ "@index"
        if coin:
            symbols.append(coin)
```

### –§–∏–ª—å—Ç—Ä—ã

- **–ü–µ—Ä–ø–µ—Ç—É–∞–ª—ã**: –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–ø–µ—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- **–°–ø–æ—Ç**: –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Ç–æ–≤—ã–µ –ø–∞—Ä—ã

## üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤–µ—á–∏ –∏–∑ —Å–¥–µ–ª–æ–∫

```python
candle = Candle(
    ts_ms=trade_timestamp,  # Timestamp —Å–¥–µ–ª–∫–∏ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
    open=first_trade_price,
    high=max_price,
    low=min_price,
    close=last_trade_price,
    volume=sum_of_quantities,  # –û–±—ä—ë–º –≤ –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç–µ
    market="spot" or "linear",
    exchange="hyperliquid",
    symbol=normalized_symbol  # –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª
)
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ timestamp (—Å–µ–∫—É–Ω–¥—ã –∏–ª–∏ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ timestamp –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- –ì–∏–±–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–µ–π —Å–¥–µ–ª–æ–∫ (price/px, size/sz/qty, time/ts/timestamp)

## üìù –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤ Hyperliquid
2. **–ì–∏–±–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è —Ü–µ–Ω, —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
3. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π ping**: Ping –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ —Ç—Ä–µ–±—É–µ–º—ã—Ö 60 —Å–µ–∫—É–Ω–¥
4. **Graceful degradation**: –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É
5. **Memory efficient**: –°–≤–µ—á–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –ø–æ—Ç–æ–∫–æ–≤–æ –±–µ–∑ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Hyperliquid

- Hyperliquid –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∏–º–≤–æ–ª–æ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å "BTC", "PURR/USDC", "@index")
- –¢—Ä–µ–±—É–µ—Ç—Å—è ping –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥, –∏–Ω–∞—á–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω endpoint –¥–ª—è –≤—Å–µ—Ö —Ä—ã–Ω–∫–æ–≤ (Spot –∏ Linear)
- –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –º–µ–∂–¥—É Spot –∏ Linear

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –û—à–∏–±–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (–Ω–µ –±–æ–ª–µ–µ 5 –æ—à–∏–±–æ–∫ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∑–∞—Å–æ—Ä–µ–Ω–∏—è –ª–æ–≥–æ–≤)
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (–Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É)
- –¢–∞–π–º–∞—É—Ç—ã –æ–∂–∏–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –æ—à–∏–±–∫–∞–º–∏
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `logger.error()`

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```python
from exchanges.hyperliquid import ws_handler

stats = ws_handler.get_statistics()
print(f"Spot: {stats['spot']['active_connections']} connections, "
      f"{stats['spot']['active_symbols']} symbols, "
      f"{stats['spot']['reconnects']} reconnects")
print(f"Linear: {stats['linear']['active_connections']} connections, "
      f"{stats['linear']['active_symbols']} symbols, "
      f"{stats['linear']['reconnects']} reconnects")
```

### –õ–æ–≥–∏

–í—Å–µ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç—ã
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Hyperliquid API Documentation](https://hyperliquid.gitbook.io/hyperliquid-docs)
- [Hyperliquid WebSocket API](https://hyperliquid.gitbook.io/hyperliquid-docs/for-developers/api/signing-requests)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏–º–≤–æ–ª–æ–≤
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ ping –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Ä–∞–∑—Ä—ã–≤–∞–º (Ctrl+C –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
4. –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–æ–≤ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–≤–µ—á–µ–π –∏–∑ —Å–¥–µ–ª–æ–∫
6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ —Å–∏–º–≤–æ–ª–æ–≤ (–ø–µ—Ä–ø–µ—Ç—É–∞–ª—ã –∏ —Å–ø–æ—Ç)

## üéØ –û—Ç–ª–∏—á–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –±–∏—Ä–∂

1. **–û–¥–∏–Ω endpoint**: Spot –∏ Linear –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω WebSocket URL
2. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∏–º–≤–æ–ª–æ–≤**: –ú–æ–∂–µ—Ç –±—ã—Ç—å "BTC", "PURR/USDC", "@index"
3. **–°—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ ping**: –¢—Ä–µ–±—É–µ—Ç—Å—è ping –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
4. **POST –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è POST –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
5. **–ì–∏–±–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª–µ–π –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö

